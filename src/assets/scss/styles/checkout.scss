/**
 * Checkout Page Styles
 *
 * Custom styling for WooCommerce checkout
 */

// ============================================
// Checkout Specific Overrides
// ============================================

.woocommerce-checkout {
	// Required field asterisk
	.required {
		@apply text-red-500 ml-1;
	}

	// Select dropdown arrow
	select {
		@apply appearance-none bg-white;
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23333333'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
		background-repeat: no-repeat;
		background-position: right 0.75rem center;
		background-size: 1.25rem;
		@apply pr-10;
	}

	// Textarea
	textarea {
		@apply min-h-[100px] resize-y;
	}

	// Placeholder text
	input::placeholder,
	textarea::placeholder {
		@apply text-gray-400;
	}

	// Validation states
	.woocommerce-invalid {
		input,
		select,
		textarea {
			@apply border-red-500 focus:ring-red-500 focus:border-red-500 #{!important};
		}

		label {
			@apply text-red-600;
		}
	}

	.woocommerce-validated {
		input:not([type="checkbox"]):not([type="radio"]),
		select,
		textarea {
			@apply border-green-500 focus:ring-green-500 focus:border-green-500 #{!important};
		}
	}

	// Error messages
	.woocommerce-error,
	.woocommerce-NoticeGroup-checkout {
		@apply bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6;

		li {
			@apply text-sm list-none;
		}

		a {
			@apply text-red-600 hover:text-red-800 underline font-medium;
		}
	}
}

// ============================================
// Crafty Clicks Postcode Lookup
// ============================================

.woocommerce-checkout {
	// Container for postcode lookup (make it inline)
	.crafty_billing,
	.crafty_shipping {
		@apply flex items-end gap-3 mb-4;

		&.form-row-first,
		&.form-row-last {
			@apply w-auto flex-1;
		}

		// Postcode label - make it bold
		label {
			@apply font-bold;
		}
	}

	// Postcode search input field
	.crafty_billing input.input-text,
	.crafty_shipping input.input-text {
		@apply w-full px-4 py-3 border border-gray-300 rounded-lg;
		@apply text-sm text-ats-dark;
		@apply focus:ring-2 focus:ring-ats-yellow focus:border-ats-yellow;
		@apply transition-colors duration-200;
	}

	// Find Address button - ATS brand dark styling
	#billing_cp_button,
	#shipping_cp_button {
		@apply px-6 py-3 bg-ats-dark text-white;
		@apply text-sm font-semibold rounded-lg;
		@apply transition-all duration-200;
		@apply border-0 cursor-pointer;
		@apply hover:bg-primary-700;
		min-height: 48px !important;
		white-space: nowrap !important;

		// Override any inline styles from plugin
		background-color: theme('colors.ats.dark') #{!important};
		color: white #{!important};
		border: 0 #{!important};
		border-radius: 0.5rem #{!important};

		&:hover {
			background-color: theme('colors.primary.700') #{!important};
		}
	}

	// Results dropdown
	.crafty_billing select,
	.crafty_shipping select {
		@apply w-full px-4 py-3 border border-gray-300 rounded-lg;
		@apply text-sm text-ats-dark appearance-none bg-white;
		@apply focus:ring-2 focus:ring-ats-yellow focus:border-ats-yellow;
		@apply transition-colors duration-200;
		background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23333333'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
		background-repeat: no-repeat;
		background-position: right 0.75rem center;
		background-size: 1.25rem;
		@apply pr-10;
	}

	// Manual entry link
	#billingcc_c2a_manual,
	#shippingcc_c2a_manual {
		@apply text-xs text-ats-text underline cursor-pointer;
		@apply hover:text-ats-dark transition-colors;
		margin-top: 0.5rem !important;
	}
}

// ============================================
// Order Review Table
// ============================================

/*
 * IMPORTANT: WooCommerce AJAX requires proper table structure
 */
.woocommerce-checkout-review-order-table {
	width: 100% !important;
	border-collapse: collapse !important;

	tr {
		border-bottom: 1px solid theme('colors.gray.100');

		&:last-child {
			border-bottom: none;
		}

		&.order-total {
			border-top: 2px solid theme('colors.gray.200');
		}
	}

	th,
	td {
		vertical-align: top;
	}
}

// ============================================
// Shipping Methods Styling
// ============================================

.woocommerce-checkout-review-order {
	// Shipping methods container
	#shipping_method {
		@apply space-y-3;

		li {
			@apply list-none m-0 p-0;

			// All labels styled as cards
			label {
				@apply flex items-center gap-3 p-4 border border-gray-200 rounded-lg cursor-pointer;
				@apply transition-all duration-200;
				@apply hover:border-gray-300;

				input[type="radio"] {
					@apply w-4 h-4 text-ats-yellow bg-white border-gray-300;
					@apply focus:ring-ats-yellow focus:ring-2;
					@apply cursor-pointer flex-shrink-0;
				}

				.woocommerce-Price-amount {
					@apply font-semibold text-ats-dark;
				}
			}

			// Selected shipping method gets yellow background
			label:has(input:checked) {
				@apply bg-ats-yellow bg-opacity-10 border-ats-yellow #{!important};
			}
		}
	}

	// Shipping methods in checkout review
	.woocommerce-shipping-totals {
		#shipping_method {
			li {
				@apply list-none m-0 p-0;

				// Radio button wrapper (div)
				.rfs-ref-shipping-radio-wrapper {
					@apply flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer;
					@apply transition-all duration-200;
					@apply hover:border-gray-300;

					input[type="radio"] {
						@apply w-4 h-4 text-ats-yellow bg-white border-gray-300;
						@apply focus:ring-ats-yellow focus:ring-2;
						@apply cursor-pointer flex-shrink-0;
					}

					label {
						@apply mb-0 cursor-pointer flex-grow text-sm;

						.woocommerce-Price-amount {
							@apply font-semibold text-ats-dark;
						}
					}

					// Selected state
					&:has(input:checked) {
						@apply bg-ats-yellow bg-opacity-10 border-ats-yellow #{!important};
					}
				}

				// Single method (hidden input + label)
				.rfs-ref-shipping-single {
					@apply p-3 border border-gray-200 rounded-lg bg-gray-50 text-sm;
				}
			}
		}
	}
}
